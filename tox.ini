[tox]
envlist = {py27,py34,py35,py36,py37}{,-scandir},pypy,typecheck,lint
sitepackages = False
skip_missing_interpreters=True

[testenv]
deps = -r {toxinidir}/testrequirements.txt
commands = coverage run -m pytest --cov-append {posargs} {toxinidir}/tests

[testenv:typecheck]
python = python37
deps =
  mypy
  -r {toxinidir}/testrequirements.txt
commands = make typecheck
whitelist_externals = make

[testenv:lint]
python = python37
deps =
  flake8
  # flake8-builtins
  flake8-bugbear
  flake8-comprehensions
  # flake8-isort
  flake8-mutable
commands = flake8 fs tests

[flake8]
extend-ignore = E203,E402,W503
max-line-length = 88
per-file-ignores =
    fs/__init__.py:F401
    fs/*/__init__.py:F401
    tests/*:E501
    fs/opener/*:F811
    fs/_fscompat.py:F401

[isort]
default_section = THIRD_PARTY
known_first_party = fs
known_standard_library = typing
line_length = 88
